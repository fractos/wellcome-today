<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thumb tester</title>
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/typeahead.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
</head>

<body>
    <div class="container body-content">

        <div class="row first">
            <div class="col-md-10">
                <div class="input-group">
                    <select id="idaManifests">
                    </select>
                </div>
            </div>
            <div class="col-md-2" id="tcol">
                <select id='thumbSize'>
                    <option value="150">150 pixels</option>
                    <option value="400">400 pixels</option>
                </select>
            </div>
        </div>

        <!--<div class="row title">
			<div class="col-md-12">
            </div>
        </div>-->

        <div class="row viewer">
            <div class="col-md-12 iiif">
                <h3 id="title"></h3>
                <div id="thumbs">
                    <img src="css/spin24.gif" id='manifestWait' />
                </div>
            </div>
        </div>

        <footer>
            <hr />
            <p>Thumbnail tester</p>
        </footer>
    </div>

    <div class="modal fade" id="imgModal" tabindex="-1" role="dialog" aria-labelledby="mdlLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="mdlLabel"></h4>
                </div>
                <div class="modal-body">
                    <img id="bigImage" class="img-responsive" />
                    <div class="auth-ops" id="authOps">
                        <h5>Header</h5>
                        <div class="auth-desc">
                        </div>
                        <button id="authDo" type="button" class="btn btn-primary"></button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="mdlPrev" type="button" class="btn btn-primary btn-prevnext" data-uri="">Prev</button>
                    <button id="mdlNext" type="button" class="btn btn-primary btn-prevnext" data-uri="">Next</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
    <script src="script/bootstrap.min.js"></script>
    <script src="script/typeahead.jquery.js"></script>
    <script src="script/thumbs.js"></script>
    <script>
        assumeFullMax = true;

        $(function() {
            var thumbSize = localStorage.getItem('thumbSize');
            if(!thumbSize || thumbSize < 150){
                thumbSize = 150;
                localStorage.setItem('thumbSize', thumbSize);
            }
            if(thumbSize != 150){
                $("#thumbSize option[value='" + thumbSize + "']").prop('selected', true);
            }
            $.getJSON(window.location.pathname.replace('ida.html', 'ida-manifests.json'), function (collection) {
                    if(collection['@type'] == "sc:Collection"){
                        $("#idaManifests").empty();
                        $.each(collection.manifests, function (i, manifest) {
                            $("#idaManifests").append('<option value="' + manifest['@id'] + '">' + manifest.label + '</option>');
                        });                        
                    }
                });
        
            $('#idaManifests').change(function(){
                var mfuri =  $(this).val();
                window.location.href = window.location.pathname + "?manifest=" + mfuri;
            });
        
        });

    </script>

</body>

</html>